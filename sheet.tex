\documentclass[twoside]{report}
\usepackage{ctex}
	\setCJKmainfont{方正书宋_GBK.TTF}[BoldFont = {方正小标宋_GBK.TTF}, ItalicFont = {方正楷体_GBK.TTF}] 
	\setCJKsansfont{方正黑体_GBK.TTF}[BoldFont = {方正大黑_GBK.TTF}] 
	\setCJKmonofont{方正仿宋_GBK.TTF}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{autobreak}
\usepackage{indentfirst}
	\setlength{\parindent}{2em}
\usepackage{amsthm}
\usepackage{enumitem}
\usepackage[colorlinks,linkcolor=blue,anchorcolor=red,citecolor=green]{hyperref}
\usepackage[left=1in,right=1in,top=1in,bottom=1in]{geometry}
\usepackage{tcolorbox}
	\tcbuselibrary{skins}
% Workaround for gcd() issue in pgfplots 1.14
% (see https://sourceforge.net/p/pgfplots/bugs/129/ and
% https://tex.stackexchange.com/questions/328972/ )
\usepackage{tikz}
	% \makeatletter
	% \let\pgfmathgcdX=\pgfmathgcd@
\usepackage{pgfplots}%
	\pgfplotsset{compat=1.17}
	% \let\pgfmathgcd@=\pgfmathgcdX
	% \makeatother
\usepackage{fp} % 高精
	\usetikzlibrary{datavisualization}
	\usetikzlibrary{datavisualization.formats.functions}
	\usetikzlibrary{fixedpointarithmetic}
	\usetikzlibrary{math}
\FPdiv \halfpi \FPpi 2 % 高精
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
	\pushQED{\qed}
	\normalfont \topsep6\p@\@plus6\p@\relax
	\begin{itemize}[
		leftmargin    = 0em,
		itemindent    = 2em,
		labelsep      = 1em,
		listparindent = 2em
	]
		\item[\bfseries#1]
}{
	\popQED \end{itemize} \@endpefalse
}
\makeatother
\renewcommand{\proofname}{证}
\newenvironment{solution}{\begin{proof}[解]}{\end{proof}}
\newenvironment{analysis}{\begin{proof}[析]\let\qed\relax}{\end{proof}}
\newenvironment{innerprf}{\begin{proof}[析]\let\qed\relax}{\end{proof}}
\newcounter{question}[chapter]
\def\questionautorefname{题}
\newenvironment{question}[3][]{
	\begin{enumerate}[
		labelsep=2em,
		ref=\thequestion
	]
		\begin{tcolorbox}[
			bicolor,
			title=\textsf{#2},
			colframe=teal,
			colback=teal!12.5!white,
			colbacklower=white,
		]
			\refstepcounter{question}
			\item[\bfseries\thequestion.]{#1}
				{#3}
			\tcblower
}{
		\end{tcolorbox}
	\end{enumerate}
}
\numberwithin{equation}{question}
\renewcommand{\theequation}{\arabic{question}.\arabic{equation}}
\newcommand{\source}[1]{\begin{flushright}(\textit{#1})\end{flushright}}
\theoremstyle{definition}\newtheorem{theorem}{定理}
\theoremstyle{definition}\newtheorem{axiom}[theorem]{公理}
\theoremstyle{definition}\newtheorem{rules}[theorem]{规则}
\theoremstyle{definition}\newtheorem{corollary}[theorem]{推论}
\newcommand{\dd}{\mathop{}\!\mathrm{d}}
\usepackage{fancyhdr}
\fancypagestyle{plain}
{
	\fancyhf{}
	\fancyfoot[RO]{\bfseries\thepage}
	\fancyfoot[LE]{\bfseries\thepage}
	\renewcommand{\headrulewidth}{0pt}
}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{}
\fancyfoot[RO]{\bfseries\thepage}
\fancyfoot[LE]{\bfseries\thepage}
\fancyhead[LE]{\bfseries\leftmark}
\fancyhead[RE]{\bfseries 数学速查表\\Cheat Sheets for Math}
\fancyhead[LO]{\bfseries 红雀\\Cardinalis}
\fancyhead[RO]{\bfseries\rightmark}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}
\def\pitypesetter#1{%
	\pgfmathparse{#1}%
	\ifdim\pgfmathresult pt=0.0pt%
		%
	\else%
		\pgfmathparse{#1/\FPpi}%
		\ifdim\pgfmathresult pt=1.0pt%
			$\pi$%
		\else%
			\ifdim\pgfmathresult pt=-1.0pt%
				$-\pi$%
			\else%
				\pgfmathprintnumber{\pgfmathresult}$\pi$%
			\fi%
		\fi%
	\fi%
}
\pgfplotsset{
	% Typeset fractions of pi at regular intervals on x axis
	pi denominator/.style={
		% Make sure the x axis is in radians
		trig format plots=rad,
		% Set tick distance from style argument
		xtick distance={pi/#1},
		% Set label style: calculate reduced fraction of pi
		xticklabel={
			\tikzmath{
				% Calculate this tick's multiple of pi/#1
				int \numorig, \gcd, \num, \denom, \absnum;
				\numorig = round(\tick*#1/pi);
				% Calculate reduced fraction for \numorig/#1
				\gcd = gcd(\numorig,#1);
				\num = \numorig / \gcd;
				\absnum = abs(\num);
				\denom = #1 / \gcd;
				% Build label text
				if \num < 0 then {
						let \sign = -;
				} else {
						let \sign =;
				};
				if \absnum == 1 then {
						let \numpi = \pi;
				} else {
						let \numpi = \absnum\pi;
				};
				if \denom == 1 then {
					if \num == 0 then {
							{ \strut$0$ };
					} else {
							{ \strut$\sign\numpi$ };
					};
				} else {
					{ \strut$\sign\frac{\numpi}{\denom}$ };
					% Other style with all pi symbols same and aligned:
					%{ \strut$\sign\frac{\absnum}{\denom}\pi$ };
				};
			}
		},
	},
	pi denominator/.default=2,
	math textstyle/.code={\everymath{\textstyle}},
}
\pgfplotsset{
	my axis/.style={
		baseline,
		axis lines=middle,
		x=1cm,
		y=1cm,
		xtick distance=1,
		ytick distance=1,
		restrict y to domain=-4:4,
		enlargelimits={abs=0.5},
		grid=major,
		legend style={draw=none},
		legend pos=outer north east,
		axis line style={->},
	},
}
\pgfplotsset{
	integral plot/.is family,
	integral plot,
	default/.style={
		integrand/.value required,
		integral/.value required,
		domain=-4:4,
		samples=33,
		smooth=true,
	},
	% TODO: these keys are passed in a strange way, who can fix it?
	integrand/.store in=\integrand,
	integral/.store in=\integral,
	domain/.store in=\domain,
	samples/.store in=\samples,
	smooth/.store in=\smooth,
	% collect unknown keys in style 'remainingkeys':
	.unknown/.code={%
		\let\currname\pgfkeyscurrentname%
		\let\currval\pgfkeyscurrentvalue%
		\ifx#1\pgfkeysnovalue%
			\pgfqkeys{/pgfplots}{remainingkeys/.append style/.expand once={\currname}}%
		\else%
			\pgfqkeys{/pgfplots}{remainingkeys/.append style/.expand twice={\expandafter\currname\expandafter=\currval}}%
		\fi%
	},%
}
\pgfplotsset{
	function generated by two plot/.is family,
	function generated by two plot,
	default/.style={
		first/.value required,
		second/.value required,
		final/.value required,
		domain=-4:4,
		samples=33,
		smooth=true,
	},
	% TODO: these keys are passed in a strange way, who can fix it?
	first/.store in=\first,
	second/.store in=\second,
	final/.store in=\final,
	domain/.store in=\domain,
	samples/.store in=\samples,
	smooth/.store in=\smooth,
	% collect unknown keys in style 'remainingkeys':
	.unknown/.code={%
		\let\currname\pgfkeyscurrentname%
		\let\currval\pgfkeyscurrentvalue%
		\ifx#1\pgfkeysnovalue%
			\pgfqkeys{/pgfplots}{remainingkeys/.append style/.expand once={\currname}}%
		\else%
			\pgfqkeys{/pgfplots}{remainingkeys/.append style/.expand twice={\expandafter\currname\expandafter=\currval}}%
		\fi%
	},%
}
\pgfplotsset{
	regular axis/.style={
		my axis,
		math textstyle,
	},
	pi axis/.style={
		regular axis,
		pi denominator,
	},
}
\pgfplotscreateplotcyclelist{function generated by two}{
	{magenta},{cyan},{thick}
}
\newcommand{\integralplot}[1][]{
	\pgfqkeys{/pgfplots}{remainingkeys/.style={}} % reset remainingkeys
	\pgfqkeys{/pgfplots/integral plot}{default, #1}
	\addplot [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		/pgfplots/remainingkeys,
	]
	{\integrand};
	\addplot [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		teal,
		thick,
		/pgfplots/remainingkeys,
	]
	{\integral};
	\addplot [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		draw=none,
		fill=teal,
		fill opacity=.125,
		/pgfplots/remainingkeys,
	]
	{\integrand} \closedcycle;
}
\newcommand{\funcgenbytwoplot}[1][]{
	\pgfqkeys{/pgfplots}{remainingkeys/.style={}} % reset remainingkeys
	\pgfqkeys{/pgfplots/function generated by two plot}{default, #1}
	\addplot+ [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		/pgfplots/remainingkeys,
	]
	{\first};
	\addplot+ [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		/pgfplots/remainingkeys,
	]
	{\second};
	\addplot+ [
		domain=\domain,
		samples=\samples,
		smooth=\smooth,
		/pgfplots/remainingkeys,
	]
	{\final};
}

\newcommand{\intformula}[2]{\int {#1} \dd x = {#2} + C}

\everymath{\displaystyle}
\begin{document}

\begin{titlepage}
	\centering
	\rule{\textwidth}{1pt}

	\vspace{0.15\textheight}

	{\Huge \bfseries 数学速查表\\\vspace{1ex}Cheat Sheets for Math}

	\vspace{0.025\textheight}

	\rule{0.8\textwidth}{0.4pt}

	\vspace{0.1\textheight}

	{\Large 红雀\\\vspace{1ex}Cardinalis}

	\vfill

	{\large \today}

	\vspace{0.1\textheight}

	\rule{\textwidth}{1pt}
\end{titlepage}

\tableofcontents

\setcounter{chapter}{-1}

\chapter{序\\Prologue}

\chapter{积分表\\Table of Integrals}

\section{三角函数\\Trigonometric Functions}

\begin{question}{}
	{
		$\intformula{\sin x}{-\cos x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=sin(x),
				integral=-cos(x),
				domain=-\FPpi:\FPpi,
			]
			\legend{$\sin x$,$\cos x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\cos x}{\sin x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=cos(x),
				integral=sin(x),
				domain=-\FPpi:\FPpi,
			]
			\legend{$\cos x$,$\sin x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\sec^2 x}{\tan x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis,
			cycle list name=function generated by two,
		]
			\funcgenbytwoplot[%
				first=cos(x),
				second=sec(x),
				final=(sec(x))^2,
				domain=-\FPpi/2:3*\FPpi/2,
			]
			\legend{$\cos x$,$\sec x$,$\sec^2 x$};
		\end{axis}
	\end{tikzpicture}
	\par
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=(sec(x))^2,
				integral=tan(x),
				domain=-\FPpi/2:\FPpi/2,
			]
			\legend{$\sec^2 x$,$\tan x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\csc^2 x}{-\cot x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis,
			cycle list name=function generated by two,
		]
			\funcgenbytwoplot[%
				first=sin(x),
				second=1/sin(x),
				final=(1/sin(x))^2,
				domain=-\FPpi:\FPpi,
			]
			\legend{$\sin x$,$\csc x$,$\csc^2 x$};
		\end{axis}
	\end{tikzpicture}
	\par
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=(1/sin(x))^2,
				integral=-cot(x),
				domain=0:\FPpi,
			]%
			\legend{$\csc^2 x$,$-\cot x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\sec x \tan x}{\sec x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis,
			cycle list name=function generated by two,
		]
			\funcgenbytwoplot[%
				first=sec(x),
				second=tan(x),
				final=sec(x)*tan(x),
				domain=-\FPpi/2:3*\FPpi/2,
			]
			\legend{$\sec x$,$\tan x$,$\sec x\tan x$};
		\end{axis}
	\end{tikzpicture}
	\par
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=sec(x)*tan(x),
				integral=sec(x),
				domain=-\FPpi/2:\FPpi/2,
			]%
			\integralplot[%
				integrand=sec(x)*tan(x),
				integral=sec(x),
				domain=\FPpi/2:3*\FPpi/2,
			]%
			\legend{$\sec x \tan x$,$\sec x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\csc x \cot x}{-\csc x}$
	}
	\begin{tikzpicture}
		\begin{axis}[pi axis,
			cycle list name=function generated by two,
		]
			\funcgenbytwoplot[%
				first=1/sin(x),
				second=cot(x),
				final=1/sin(x)*cot(x),
				domain=-\FPpi:\FPpi,
			]
			\legend{$\csc x$,$\cot x$,$\csc x\cot x$};
		\end{axis}
	\end{tikzpicture}
	\par
	\begin{tikzpicture}
		\begin{axis}[pi axis]
			\integralplot[%
				integrand=1/sin(x)*cot(x),
				integral=-1/sin(x),
				domain=-\FPpi:0,
			]%
			\integralplot[%
				integrand=1/sin(x)*cot(x),
				integral=-1/sin(x),
				domain=0:\FPpi,
			]%
			\legend{$\csc x \cot x$,$-\csc x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\section{反三角函数\\Inverse Trigonometric Functions}

\begin{question}{}
	{
		$\intformula{\frac{1}{\sqrt{1-x^2}}}{\arcsin x}$
	}
	
\end{question}

\begin{question}{}
	{
		$\intformula{\frac{1}{1+x^2}}{\arctan x}$
	}
\end{question}

\begin{question}{}
	{
		$\intformula{\frac{1}{x\,\sqrt{1-x^2}}}{\arcsin x}$
	}
\end{question}

\section{双曲函数\\Hyperbolic Functions}

\begin{question}{}
	{
		$\intformula{\cosh x}{\sinh x}$
	}
	\begin{tikzpicture}
		\begin{axis}[regular axis]
			\integralplot[%
				integrand=cosh(x),
				integral=sinh(x),
				restrict y to domain=-3:3,
			]
			\legend{$\cosh x$,$\sinh x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\sinh x}{\cosh x}$
	}
	\begin{tikzpicture}
		\begin{axis}[regular axis]
			\integralplot[%
				integrand=sinh(x),
				integral=cosh(x),
				restrict y to domain=-3:3,
			]
			\legend{$\sinh x$,$\cosh x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\begin{question}{}
	{
		$\intformula{\frac{1}{\cosh^2 x}}{\tanh x}$
	}
	\begin{tikzpicture}
		\begin{axis}[regular axis]
			\integralplot[%
				integrand=1/(cosh(x))^2,
				integral=tanh(x),
			]
			\legend{$\frac{1}{\cosh^2 x}$,$\tanh x$};
		\end{axis}
	\end{tikzpicture}
\end{question}

\end{document}